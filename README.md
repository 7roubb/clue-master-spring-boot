# Clue Master - Multiplayer Mystery Game

Clue Master is a multiplayer mystery game built with Spring Boot, utilizing PostgreSQL for persistent storage, Redis for efficient caching, and the ChatGPT API to dynamically generate crime scenarios. This project combines the excitement of detective work with real-time gameplay, where players analyze clues to solve each unique mystery.

## Features

- **Dynamic Crime Scenarios:** Each round presents a unique mystery case generated using OpenAI's ChatGPT API.
- **Multiplayer Gameplay:** Players can join rooms, participate in rounds, and compete to solve cases first.
- **Interactive Rounds:** Each round includes a brief case story and four character profiles, complete with motives and alibis. Players analyze clues to identify the criminal.
- **Efficient Caching with Redis:** 
  - Redis caches generated cases for each round, reducing response time.
  - JWT tokens are stored in Redis for efficient session management.
- **Persistent Data Storage:** PostgreSQL stores game data, including user information, room details, games, and rounds.
- **RESTful API:** Built with Spring Boot, allowing for easy integration and future expansion.
- **i18n Support:** Internationalization support for a global user experience.
- **Logging and Debugging:** Configured logging for effective debugging, especially for WebSocket and messaging features.

## Technology Stack

- **Backend Framework:** Spring Boot
- **Database:** PostgreSQL
- **Cache:** Redis
- **External API:** OpenAI ChatGPT API
- **Authentication:** JWT, with tokens stored in Redis for session management
- **Messaging:** WebSocket support for real-time updates

## Setup Instructions

### Prerequisites

- **Java 17** or higher
- **PostgreSQL** database
- **Redis** server
- **OpenAI API key** for ChatGPT

### Environment Configuration

Set up environment variables for sensitive information, including:

- `JWT_SECRET`, `JWT_EXPIRATION_MS`, and `JWT_REFRESH_EXPIRATION_MS`
- `REDIS_PASSWORD`, `DB_USERNAME`, and `DB_PASSWORD`
- `OPENAI_API_KEY`

### Database Configuration

- Create a PostgreSQL database named `game_db`.
- Set up tables for users, rooms, games, and rounds (migrations can be run if necessary).

### Starting the Application

1. Clone the repository and navigate to the project directory.
2. Run `./mvnw spring-boot:run` to start the server on `http://localhost:8080`.

### Docker Compose Configuration (Optional)

You can create a `docker-compose.yml` file to run PostgreSQL and Redis in containers if desired.

## API Overview

### Authentication

- **Login:** `/auth/login`
- **Token Refresh:** JWT tokens are stored in Redis, allowing for seamless session continuity with refresh tokens.

### Game Management

- **Create Game:** Initiates a new game session, creating rounds and rooms.
- **Join Room:** Allows players to join a specific room with other participants.
- **Progress Rounds:** Players submit answers to progress through rounds. Each roundâ€™s case and clues are dynamically generated by ChatGPT.

### Real-time Updates

- **WebSocket Endpoint:** Real-time game updates are broadcasted via WebSocket at `/topic`, keeping players informed about room and round progress.

## Contributions

Contributions are welcome! Feel free to submit issues or pull requests to help improve Clue Master.

## License

This project is licensed under the MIT License.

---

Enjoy solving mysteries with Clue Master!
